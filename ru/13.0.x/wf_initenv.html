	<h1><span>INITENV</span></h1>
	
	<h2><a name="jcreate_cmd">команды: initenv, initenv-tui</a></h2>
	<div class="block">
		<pre class="brush:bash;ruler=true;">
		% cbsd initenv
		% cbsd initenv-tui
		</pre>
	</div>
	<div class="block">
		<strong>Описание</strong>:
		<p>Скрипт initenv-tui представляет из себя диалог к глобальным настройкам CBSD, позволяя изменить те настройки, которые пользователь вводил при первой инициализации</p>
		<p>Кроме этого, запускает initenv для синхронизации скриптов и шаблонов в рабочем каталоге из каталога-дистрибутива</p>
		<ul>
			<li>rcconf - включает или выключает <strong>CBSD</strong> через соответствующую запись в /etc/rc.conf ( cbsdd_enable ). Обратите внимание, что при этом сервис и клетки не будут останавливаться и запускаться</li>
			<li>nodename - уникальный идентификатор ноды, обычно FQDN сервера. При смене имени ноды, ее ключи будут перегенерированы, что потребует перезаведение этой ноды на тех участниках, связь с которыми необходима</li>
			<li>nodeip - management-IP адрес ноды. Должен быть фиксированный (статический или привязанный к MAC адрес)</li>
			<li>nodedescr - содержимое файла описания ноды ( на ваше усмотрение ). Вы можете также редактировать его через ascii файл: $workdir/node.desc</li>
			<li>jnameserver - список IP адресов, которые <strong>CBSD</strong> будет прописывать в /etc/resolv.conf клеткам при их запуске, если клетка имеет настройку applytpl=1. Данная настройка особенна полезна, когда jail может мигрировать на ноду в другую подсеть, которую обслуживает уже другой DNS сервер. Для нескольких IP серверов, указывайте адреса через запятую. Например: 8.8.8.8,8.8.4.4</li>
			<li>nodeippool - список подсетей, отводимых под использование jail. IP из этого диапазона будут автоматически предлагаться клеткам и назначаться, если ip4_addr клетки установлен в DHCP. Для нескольких сетей используйте пробел как разделитель. Например: "10.0.0.0/16 192.168.1.0/24". В данный момент, <strong>CBSD</strong> не проверяет диапазон адресов и использует только первую подсеть. </li>
			<li>nat_enable - выключить или включить использование NAT через CBSD. Фактически, данная команда делает запуск: cbsd natcfg. Рекомендуемый фреймворк NAT: pf</li>
			<li>natip - выбрать IP, который будет использован NAT-ом. IP должен быть инициализирован. Может совпадать с nodeip.</li>
			<li>fbsdrepo - откуда скачиваем базу и ядра. Если стоит 1, официальный репозиторий FreeBSD будет предпочтительней. Если 0 - используется репозиторий проекта <strong>CBSD</strong> (который однако, не всегда может быть свеж, но в отличие от репозитория FreeBSD содержит также промежуточные сборки ( FreeBSD-current, FreeeBSD RELENG ) если параметр stable установлен в 1.</li>
			<li>ipfw_enable - включить IPFW для посчета трафика в jail. Более подробно читайте: Counting traffic jail</li>
			<li>zfsfeat - Если $workdir размещен на ZFS, <strong>CBSD</strong> вместо создания каталога данных с jail будет создавать отдельные ZFS файловые системы, что может приносить отдельную пользу</li>
			<li>parallel - интервал в секундах при запуске  и останове CBSD, через который будет запущен или остановлен следующий из списка jail, если предыдущий не вернул управление (медленно инициализируется, блокирующая ошибка в скрипте запуска или останова). Данная настройка защищает от ситуации, когда из-за блокированной первой клетки остальные - не запускаются и ждут.</li>
			<li>sqlreplica - В данный момент этот параметр отвечает за подьем SSH туннеля между добавленными нодами.</li>
		</ul>
		<p>При выборе COMMIT, запускается initenv и работа скрипта завершается</p>
	</div>
	